# Acs-Go
[TOC]
##1、创新项目名称
>	AcsGo --- LOL个性化&高并发活动配置系统

## 2、创新人员名称
>	leoyzheng(郑阳)、baoleiwang(王宝雷)、gloryzhang(张荣)、whiteczhang(张超)

##3、创新项目背景
>	随着今年LOL需求特性的转变，`个性化条件`、`海量高品质道具`、`大规模多渠道合作`的活动越来越多，此类活动参与并发高，个性化逻辑较多，通过开发AcsGo轻量级配置系统可以快速对活动进行接入以及逻辑固化，节省开发人力成本以及机器资源

##4、创新项目功能特性
### 4.1 高并发支撑
>	底层逻辑全部采用**`Golang`**进行开发，目前线上部署的10台v12机器可支撑最高**`6W/s`**的请求量(逻辑覆盖Redis读写、IDIP读、DB读写)，下图案例是相同类型活动用PHP自开发以及通过AcsGo配置的效果对比

![PHP自开发活动与AcsGo配置活动性能对比](http://km.oa.com/files/photos/pictures//20171223//1514029263_58.png)

###4.2个性化条件配置
- 案例1：
>	由于LOL活动发放的英雄以及皮肤道具日渐饱和，产品希望在活动中能够**`自动过滤奖池中玩家已拥有的道具`**，优先**`发放未拥有道具至当前大区`**，假设**`全部拥有`**则玩家可以自行**`领取至任意大区`**

- 如下图所示：针对此类个性化的条件，只需要通过简单配置即可实现，无需重复编写代码实现功能

![功能配置](http://km.oa.com/files/photos/pictures//20171223//1514030132_63.png)

- 案例2：
>	卡牌类玩法，需要支持卡牌**`赠送`**、**`索要`**、**`分享`**、**`合成`**、**`升级`**等功能，早前春节的卡牌交换活动以及第一期自开发的卡牌类活动平均开发耗时约**`1周`**左右，通过配置化的方式在养蜂人活动以及源计划卡牌收集活动上的开发耗时**`仅2天`**

- 如下图所示：针对卡牌类玩法的条件可任意配置资格以及条件（例如接受者需要登陆过游戏、完成过对局）等个性化条件，满足活动的需求，无任何开发成本

![卡牌交换任务](http://km.oa.com/files/photos/pictures//20171223//1514030688_31.png)

>	更多个性化配置功能不一一列举，AcsGo的轻量级可以快速针对**`个性化逻辑进行固化`**，将**`个性化变成通用可配置化`**

###4.3物品批量导入及实时发货
>	AcsGo解决了以往LOL活动大批量道具通过人工配置到后台效率低下的问题，以一个活动需要**`配置500个皮肤为例`**。人工配置耗时约为**`2天`**，通过批量礼包导入工具耗时约为**`5秒`**,而物品发货则统一通过**`Golang发货队列`**进行道具发放，目前支持LOL**`所有类型的道具发放`**，**`分布式队列`**部署保证了多个活动同时在线时的**`秒级发货`**，通过**`唯一流水号`**、**`实时发货对账`**等手段防止道具误发、多发的问题

![礼包批量导入](http://km.oa.com/files/photos/pictures//20171223//1514032929_44.png)


###4.4活动监控
####4.4.1 活动并发监控
>	通过AcsGo配置的活动在后台可以**`实时`**查询到当前活动的**`参与并发`**，当并发超过设定阀值时，会通过**`微信通知`**开发人员进行关注

![后台并发监控](http://km.oa.com/files/photos/pictures//20171223//1514031237_39.png)

![微信实时告警](http://km.oa.com/files/photos/pictures//20171223//1514032017_59.png)

####4.4.2 进程及日志监控
>	AcsGo通过接入Hac告警平台对线上错误和异常进行实时监控并告警，对Go进程本身也会通过心跳以及判断进程是否存在进行监控

![日志监控](http://km.oa.com/files/photos/pictures//20171223//1514031633_85.png)
![进程监控](http://km.oa.com/files/photos/pictures//20171223//1514031637_79.png)

###4.5活动提醒及数据推送
>	通过ACS配置的活动上线后**`实时推送`**活动的参与、任务、渠道数据，当**`活动快下线时`**则会通过**`短信`**的方式**`提醒`**产品以及开发人员，确认**`活动有效时间`**

![活动参与数据](http://km.oa.com/files/photos/pictures//20171223//1514031949_75.png)
![活动下线提醒](http://km.oa.com/files/photos/pictures//20171223//1514032217_25.png)

###4.6统一客服管理后台
>	提供客服**`自助查询`**用户的活动记录，资格补发等功能的管理端，帮助客服**`快速定位问题`**，**`解决`**用户投诉堆积过多导致**`突发等问题`**

![客服统一后台](http://km.oa.com/files/photos/pictures//20171223//1514032365_89.png)


##5、创新项目整体架构

![物理架构](http://km.oa.com/files/photos/pictures//20171223//1514033289_18.png)

![逻辑架构](http://km.oa.com/files/photos/pictures//20171223//1514033318_61.png)





## 6、创新项目使用场景
>	通过ACS-Go管理后台配置的运营活动共计**`27个`**，**`非支付类重要节点运营活动覆盖率100%`**,其中大活动包括（大提莫节、6周年战斗之夜、开学季活动、中秋国庆双节大作战、挑战养蜂人、S7赛季冲刺、感恩之夜、源计划集卡、年度颁奖玩家回馈,冰雪狂欢)

- 活动案例：

**掌盟冰雪节签到**：、
H5：http://lol.qq.com/m/act/a20171214sign/index.html

**冰雪节皮肤收集兑换**：
PC：http://lol.qq.com/act/a20171211snow/index.htm
H5： http://lol.qq.com/m/act/a20171211sonwm/index.html

**冰雪狂欢无限活力**：
PC：http://lol.qq.com/act/a20171214firepower/index.html
H5： http://lol.qq.com/m/act/a20171216firepower/index.html

**Allstar社区明星卡揭秘**：
PC：http://lpl.qq.com/es/act/a20171130asclub/index.html
H5： http://lpl.qq.com/es/m/act/a20171205asclub/index.html

**6周年战斗之夜**：
PC：http://lol.qq.com/act/a20170902fighting/index.shtml
H5：http://lol.qq.com/m/act/a20170902fighting/index.html